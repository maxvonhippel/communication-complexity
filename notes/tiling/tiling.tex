\title{The Tiling Method}
\author{Max von Hippel}
\date{\today}

\documentclass[12pt]{article}

\include{header}

\begin{document}
\maketitle

Consider a two-party communication problem,
	in which the participants

\begin{figure}[h]
\centering
\begin{subfigure}{.3\textwidth}
  \centering
  \includegraphics[width=.2\linewidth]{alice.png}
  \caption{Alice}
  \label{fig:alice}
\end{subfigure}%
and
\begin{subfigure}{.3\textwidth}
  \centering
  \includegraphics[width=.2\linewidth]{bob.png}
  \caption{Bob}
  \label{fig:bob}
\end{subfigure}
\label{fig:participants}
\end{figure}

\emph{participate} to compute a function:
\[f : \underbrace{\mathbb{B}^n}_{\begin{aligned}\text{Alice's}\\\text{input}\end{aligned}} \times 
      \underbrace{\mathbb{B}^n}_{\begin{aligned}\text{Bob's}\\\text{input}\end{aligned}} \to 
      \underbrace{\mathbb{B}}_{\begin{aligned}\text{global}\\\text{output}\end{aligned}}\]
The players can come up with a \emph{protocol} 
\(\Pi = (p_1, ..., p_t)\),
namely, 
	for some natural $t \in \mathbb{N}$,
	a sequence of $t$-many functions
\(p_i : \mathbb{B}^* \to \mathbb{B}^*\)
such that the communication between the players looks like this:\\
\noindent\hfill\par
\noindent\makebox[\textwidth][c]{%
    \begin{minipage}{0.8\textwidth}
\noindent\fbox{\parbox{\textwidth}{
Alice is given input $x$.
\begin{leftbubbles}
Hi Bob. I'm not divulging $x$, but, $p_1(x) = \texttt{P1}$.
\end{leftbubbles}
\rightline{Bob is given input $y$.}
\begin{rightbubbles}
Thanks Alice.  I'm not divulging $y$, but, $p_2(y, \texttt{P1}) = \texttt{P2}$.
\end{rightbubbles}
\begin{leftbubbles}
Thanks Bob.  Don't tell anyone, but: $p_3(x, \texttt{P1}, \texttt{P2}) = \texttt{P3}$.
\end{leftbubbles}
\begin{rightbubbles}
Is that so? Well, $p_4(y, \texttt{P1}, \texttt{P2}, \texttt{P3}) = \texttt{P4}$.
\end{rightbubbles}
\begin{leftbubbles}
Wicked.  In that case, $p_5(x, \texttt{P1}, \texttt{P2}, \texttt{P3}, \texttt{P4}) = \texttt{P5}$.
\end{leftbubbles}
\[... \emph{yada yada yada} ...\]
\begin{leftbubbles}
In that case, the last thing you need to know is that $p_t(x, \texttt{P1}, \texttt{P2}, \texttt{P3}, \texttt{P4}, ..., \texttt{P(t-1)})=\texttt{Pt}$.
\end{leftbubbles}}}
\end{minipage}}
\clearpage
Suppose that there is a protocol $\Pi$ for $f$ consisting of $t$ messages,
but, there does not exist any protocol $\Pi'$ for $f$ consisting of fewer than $t$ messages.
Then we say $t$ is the \emph{communication complexity} of $f$, and we write $C(f) = t$.

Given some such function $f$, it would be nice if we could automatically compute
a reasonable lower bound on its communication complexity.
One way to do this is with the \emph{tiling method}.
We will give the method immediately, and in tandem, we will illustrate the method using
the function $f(x, y) = x < y$ where $x, y$ are integers in $\{ 0, 1, 2, 3 \}$, encoded in $\mathbb{B}$oolean.
First, let $M(f)$ be the \emph{matrix of }$f$,
	namely,
		the $2^n \times 2^n$ matrix whose $(x, y)$th entry
		is the value $f(x, y)$.

\begin{table}[h]
\centering
\begin{tabular}{|l|lllll|}
\hline
    & \texttt{000} & \texttt{001} & \texttt{010} & \texttt{011} & \texttt{100} \\\hline
\texttt{000} = 0   & \cellcolor{red!25}0 & \cellcolor{green!25}1 & \cellcolor{green!25}1 & \cellcolor{green!25}1 & \cellcolor{green!25}1 \\
\texttt{001} = 1   & \cellcolor{red!25}0 & \cellcolor{red!25}0 & \cellcolor{green!25}1 & \cellcolor{green!25}1 & \cellcolor{green!25}1 \\
\texttt{010} = 2   & \cellcolor{red!25}0 & \cellcolor{red!25}0 & \cellcolor{red!25}0 & \cellcolor{green!25}1 & \cellcolor{green!25}1 \\
\texttt{011} = 3   & \cellcolor{red!25}0 & \cellcolor{red!25}0 & \cellcolor{red!25}0 & \cellcolor{red!25}0 & \cellcolor{green!25}1 \\
\texttt{100} = 4   & \cellcolor{red!25}0 & \cellcolor{red!25}0 & \cellcolor{red!25}0 & \cellcolor{red!25}0 & \cellcolor{red!25}0\\\hline
\end{tabular}
\caption{The matrix $M(<)$ for inputs $x, y \in \{ 0, 1, 2, 3 \}$.  Values of $x$ are given in the rows, while values of $y$ are given in the columns.  False (i.e. 0) values are marked red for clarity.}
\end{table}

A \emph{combinatorial rectangle} in $M(f)$ is any submatrix of $M$.
We say a rectangle $A \times B$ in $M(f)$ is \emph{monochromatic}
if for all $x, x'$ in $A$ and $y, y'$ in $B$, $M_{x,y} = M_{x',y'}$.

\begin{figure}[h]
\centering 
	\begin{minipage}{0.25\textwidth}
		\begin{tabular}{|l|lllll|}
		\hline
		    & 0 & 1 & 2 & 3 & 4 \\\hline
		0   & 0 & 1 & 1 & 1 & 1 \\
		1   & 0 & 0 & 1 & 1 & 1 \\
		2   & \cellcolor{purple!75}{\textcolor{white}{0}} & \cellcolor{purple!75}{\textcolor{white}{0}} & \cellcolor{purple!75}{\textcolor{white}{0}} & 1 & 1 \\
		3   & \cellcolor{purple!75}{\textcolor{white}{0}} & \cellcolor{purple!75}{\textcolor{white}{0}} & \cellcolor{purple!75}{\textcolor{white}{0}} & 0 & 1 \\
		4   & \cellcolor{purple!75}{\textcolor{white}{0}} & \cellcolor{purple!75}{\textcolor{white}{0}} & \cellcolor{purple!75}{\textcolor{white}{0}} & 0 & 0\\\hline
		\end{tabular}
	\end{minipage}
	\begin{minipage}{0.25\textwidth}
		\begin{tabular}{|l|lllll|}
		\hline
		    & 0 & 1 & 2 & 3 & 4 \\\hline
		0   & \cellcolor{orange!75}0 & 1 & \cellcolor{orange!75}1 & 1 & \cellcolor{orange!75}1 \\
		1   & \cellcolor{orange!75}0 & 0 & \cellcolor{orange!75}1 & 1 & \cellcolor{orange!75}1 \\
		2   & 0 & 0 & 0 & 1 & 1 \\
		3   & \cellcolor{orange!75}0 & 0 & \cellcolor{orange!75}0 & 0 & \cellcolor{orange!75}1 \\
		4   & 0 & 0 & 0 & 0 & 0\\\hline
		\end{tabular}   
	\end{minipage}
	\begin{minipage}{0.25\textwidth}
		\begin{tabular}{|l|lllll|}
		\hline
		    & 0 & 1 & 2 & 3 & 4 \\\hline
		0   & 0 & 1 & \cellcolor{black!75}{\textcolor{white}{1}} & \cellcolor{black!75}{\textcolor{white}{1}} & 1 \\
		1   & 0 & 0 & \cellcolor{black!75}{\textcolor{white}{1}} & \cellcolor{black!75}{\textcolor{white}{1}} & 1 \\
		2   & 0 & 0 & \cellcolor{black!75}{\textcolor{white}{0}} & \cellcolor{black!75}{\textcolor{white}{1}} & 1 \\
		3   & 0 & 0 & 0 & 0 & 1 \\
		4   & 0 & 0 & 0 & 0 & 0\\\hline
		\end{tabular}   
	\end{minipage}
	\caption{Some example rectangles of $M(<)$.  The first rectange, in {\colorbox{purple!75}{\textcolor{white}{purple}}}, is monochromatically colored 0.  The second rectangle, in {\colorbox{orange!75}{orange}}, is illustrates the flexibility of our rectangle definition, namely, that the rectangle does not actually need to be connected in the original matrix (although, the entries cannot be permuted).  Neither the {\colorbox{purple!75}{\textcolor{white}{second}}} nor {\colorbox{black!75}{\textcolor{white}{third}}} rectangle is monochromatic.}
\end{figure}

Without loss of generality, 
	suppose the protocol $\Pi$ begins with Alice
	sending a bit $b$.
Then \emph{certainly} $M(f)$ partitions into two rectangles \textsf{L} and \textsf{R},
	where \textsf{L} considers all the scenarios where the bit Alice sent was 0,
	and \textsf{R} considers all the scenarios where the bit Alice sent was 1.
Notice that \textsf{L} and \textsf{R} are strictly smaller than $M(f)$;
	in fact, the number of cells in \textsf{L} plus the number of cells in \textsf{R}
	equals the number of cells in $M(f)$.
	This is what we mean by a \emph{partition}.

\clearpage

\begin{figure}[h]
\centering
\begin{forest}, baseline, qtree
[$M(f)$
	[Partition \textsf{L} of $M(f)$\\where Alice sent 0
		[Partition \textsf{LL} of \textsf{L}\\
		where Bob replied 0
			[...]
			[...]]
		[Partition \textsf{LR} of \textsf{L}\\
		where Bob replied 1
			[...]
			[...]]]
	[Partition \textsf{R} of $M(f)$\\where Alice sent 1
		[Partition \textsf{RL} of \textsf{R}\\
		 where Bob replied 0
		 	[...]
		 	[...]]
		[Partition \textsf{RR} of \textsf{R}\\
		 where Bob replied 1
		 	[...]
		 	[...]]]]
\end{forest}
\end{figure}
Consider the \textsf{L} branch.
The case of the original protocol where Alice starts by sending a 0
	is precisely the smaller protocol in which Bob makes the first move,
	rooted in \textsf{L}.
In other words, we have an inductive structure,
	where every step in a protocol $\Pi$ yields
	a new, smaller protocol.
Every step down the tree further disjointly partitions
the space of possible values $f(x, y)$.
Since there were finitely many such values $f(x, y) \in M(f)$ in the first place,
	clearly every such walk must eventually end in a \emph{leaf} of the tree.
In fact, each leaf is monochromatic.
\begin{proof}
For a contradiction assume some leaf \textsf{J} is not monochromatic.
That is, \textsf{J} has entries $i$ and $j$ such that $i \neq j$.
Since $i \neq j$ we know that they are in different cells.
WLOG suppose $i$ and $j$ occur in different rows.
Then the row of $i$ or $j$ refers to a bit of information about $x$ which Alice did not
yet share with Bob.  (We know it's of $x$ as it's a row; we know she did not share it yet as otherwise the subsequent partitioning would seperate $i$ and $j$.)
But this implies that we are not at a leaf yet, since Alice could send another bit of information
and depending on that bit, partition the set of possible values $f(x, y)$ disjointly,
into a set containing $i$ and another containing $j$.
So we have reached a contradiction since we assumed \textsf{J} was a leaf, and we are done.
\end{proof}
We have just considered one protocol, $\Pi$, namely the protocol where Alice and Bob take turns
reading aloud the bits of their input from least-significant to most-significant.
And we've seen that this induces a natural upper bound on the communication complexity of $f$,
namely the maximum depth of the tree we computed for $\Pi$ where each branch ends as soon as it
becomes monochromatic.
But maybe there is some \emph{better} protocol $\Pi'$, which achieves a better communication complexity,
i.e., that yields a less-obvious, tighter upper bound.
Given $f$, let $\chi(f)$ denote the minimum number of rectangles in any monochromatic tiling of $M(f)$.
Then we claim the following.
\begin{theorem}[\texttt{AUY83}]
\[\emph{log}_2 \, \chi(f) \leq
C(f) \leq
16\big(\emph{log}_2 \, \chi(f) \big)^2\]
\end{theorem}
\begin{itemize}
\item \TODO - prove it and explain and illustrate the proof
\item \TODO - give and prove Lemma 13.9 relating to fooling set
\end{itemize}


% \begin{figure}
% \centering
% \begin{forest}
%  [\(\begin{bmatrix}
%  0 & 1 & 1 & 1 & 1 \\
%  0 & 0 & 1 & 1 & 1 \\
%  0 & 0 & 0 & 1 & 1 \\
%  0 & 0 & 0 & 0 & 1 \\
%  0 & 0 & 0 & 0 & 0
%  \end{bmatrix}\)
%  	% right-most bit of Alice is 0
%  	[\(\begin{bmatrix}
%  	0 & 1 & 1 & 1 & 1 \\ % row 1
%  	0 & 0 & 0 & 1 & 1 \\ % row 3
%  	0 & 0 & 0 & 0 & 0    % row 5
%  	\end{bmatrix}\)
%  		% right-most bit of Bob is 0
%  		[\(\begin{bmatrix}
%  		% col 1 | col 3 | col 5
%  		0       & 1     & 1 \\ % row 1
%  		0       & 0     & 1 \\ % row 3
%  		0       & 0     & 0 \\ % row 5
%  		\end{bmatrix}\)
%  			% middle bit of Alice is 0
%  			% middle bit of Alice is 1
%  		]
%  		% right-most bit of reply is 1
%  		[\(\begin{bmatrix}
%  		% col 2 | col 4
%  		1       & 1 \\ % row 1
%  		0       & 1 \\ % row 3
%  		0       & 0 \\ % row 5
%  		\end{bmatrix}\)]
%  	]
%  	% right-most bit is 1
%  	[\(\begin{bmatrix}
%  	0 & 0 & 1 & 1 & 1 \\ % row 2
%  	0 & 0 & 0 & 0 & 1    % row 4
%  	\end{bmatrix}\)
%  		% right-most bit of reply is 0
%  		% right-most bit of reply is 1
%  	]
%  ]
% \end{forest}
% \end{figure}

% \bibliographystyle{IEEEtran}
% \bibliography{htm}
\end{document}